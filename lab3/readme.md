# 微處理機系統與介面技術 - LAB 3

## 實驗簡介
本次實驗透過 NUC140 微控制器實現光敏電阻（LDR）的類比訊號轉數位值 (ADC) 功能，並將數值以 Putty 終端顯示。同時，根據 ADC 數值動態控制 LED 的閃爍頻率。

## 實驗器材
- **NUC140 V2.0 開發板**
- **光敏電阻（LDR）**
- **UART to USB 模組**（PL2303HXA 或 CH340G）
- **Putty 軟體**（用於終端模擬）

## 實驗功能
### 基本功能
- 使用 ADC 將 LDR 接收到的電壓值轉為數位值。
- 將數位值以每 0.5~1ms 的頻率傳輸到 Putty 顯示。

### 加分功能
- 根據 LDR 的數值調整 LED 閃爍頻率：
  - 電阻值低（亮度高）→ 閃爍頻率低
  - 電阻值高（亮度低）→ 閃爍頻率高

## 實驗步驟
1. **硬體接線**：
   - LDR 與電阻形成分壓電路，電壓輸出接至 NUC140 的 ADC 輸入腳位（PA2）。
   - LED 腳位（PC12-PC15）設為輸出模式。
   - UART 模組連接至 PC 的 USB 接口。
2. **軟體設置**：
   - 使用 Putty 設定對應的 COM Port 和波特率（115200）。
3. **程式運行**：
   - 啟動程式，測試 ADC 數值顯示與 LED 閃爍功能。

## 系統架構
### 程式結構
- **main.c**：
  - `SYS_Init`：初始化系統時鐘與多功能腳位。
  - `UART0_Init`：初始化 UART，包括波特率設置。
  - `ADC_Init`：初始化 ADC，設定為單次模式，啟用 PA2 為 ADC 輸入。
  - `GPIO_Init`：設置 LED 的 GPIO 腳位為輸出模式。
  - `AdcSingleModeTest`：控制 ADC 數值顯示於 Putty，並根據數值調整 LED 閃爍頻率。
  - `ADC_IRQHandler`：處理 ADC 轉換完成的中斷事件。

### 中斷處理
- **ADC 中斷**：
  - 當 ADC 轉換完成時，觸發中斷處理器讀取數據，並清除中斷旗標以準備下一次轉換。

### 設備與引腳
- ADC 輸入腳位：PA2（ADC2）。
- LED 輸出腳位：PC12-PC15。

## 成果展示
- Putty 中以 0.5~1ms 的頻率顯示 ADC 數值。
- LED 根據 LDR 的光敏數值動態閃爍，亮度越高閃爍越慢，亮度越低閃爍越快。

## 心得與收穫
本次實驗讓我們熟悉了 ADC 模組的操作流程與硬體設定，包括模數轉換模式的選擇和中斷處理的應用。從中學習到了如何有效整合類比訊號的數位化處理，並將其應用於 LED 的控制。此過程加深了對嵌入式系統中 ADC 模組運作原理的理解，為未來的硬體開發奠定了堅實基礎。
