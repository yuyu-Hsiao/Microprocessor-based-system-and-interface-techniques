# 微處理機系統與介面技術 - LAB 5

## 實驗簡介
本次實驗利用 NUC140 微控制器與 I2C 通訊協定，實現與 ADXL345 三軸加速度感測器的通信，讀取三軸加速度數據，進行校準後顯示於 Putty 終端。

## 實驗器材
- **NUC140 V2.0 開發板**
- **ADXL345 三軸加速度感測器**
- **UART to USB 模組**（PL2303HXA 或 CH340G）
- **Putty 軟體**（用於終端模擬）

## 實驗功能
### 基本功能
- 使用 I2C 與 ADXL345 通信，讀取 X、Y、Z 三軸加速度數據。
- 校準三軸數據，將校準後的數據輸出至 Putty。

### 校準公式
- 校準公式：`Result = (Raw data ± offset) / (256 ± offset)`

## 實驗步驟
1. **硬體接線**：
   - **SDA** → GPA8 (I2C0 SDA)
   - **SCL** → GPA9 (I2C0 SCL)
   - ADXL345 的 **SDO** 接地，使用地址 `0x53`。
2. **軟體設置**：
   - 初始化 I2C0，設定為 100kHz 時鐘速率。
   - 設置 UART 波特率為 115200，用於終端輸出。
3. **程式運行**：
   - 初始化 ADXL345，進行校準，並讀取三軸數據顯示於 Putty。

## 系統架構
### 程式結構
- **main.c**：
  - `SYS_Init`：初始化系統時鐘及多功能腳位。
  - `UART0_Init`：初始化 UART，用於終端輸出。
  - `I2C0_Init`：初始化 I2C0，設定時鐘速率及中斷。
  - `ADXL_init`：配置 ADXL345 的初始寄存器值。
  - `ADXL_WriteBytes`：向 ADXL 暫存器寫入數據。
  - `ADXL_ReadBytes`：從 ADXL 暫存器讀取數據。
  - `ADXL_calibrate`：校準 ADXL345，計算偏移量並寫入寄存器。
  - `main`：主程式流程，初始化系統並持續讀取加速度數據。

### I2C 配置
- **I2C 工作頻率**：100kHz
- **地址**：`0x53`（當 SDO 接地時）
- **中斷處理**：
  - I2C0 處理器會根據狀態碼（如 `0x08`, `0x18`, `0x28`）執行對應的資料傳輸。

### ADXL345 配置
- **POWER_CTL (0x2D)**：啟用測量模式。
- **DATA_FORMAT (0x31)**：設置 16 位數據格式。
- **FIFO_CTL (0x38)**：設置 FIFO 為 Stream 模式。

## 成果展示
- Putty 輸出範例：
