# 微處理機系統與介面技術 - LAB 8

## 實驗簡介
本次實驗利用 NUC140 微控制器與機器學習實作光敏電阻感測器的顏色分類系統，使用人工神經網路（ANN）模型進行訓練與預測，實現對光源顏色的辨識。

## 實驗器材
- **NUC140 V2.0 開發板**
- **透明紙**
- **光敏電阻**
- **LED 光源**

## 實驗功能
### 基本功能
- 使用機器學習辨識 4 種顏色輸出：
  - 紅 (Red)、藍 (Blue)、綠 (Green)、環境光 (Ambient Light)

### 加分功能
- 使用機器學習辨識 7 種顏色輸出：
  - 紅 (Red)、藍 (Blue)、綠 (Green)、洋紅 (Magenta)、橘 (Orange)、黃 (Yellow)、環境光 (Ambient Light)

## 實驗步驟
1. **硬體設置**：
   - 使用透明紙覆蓋光敏電阻作為濾光器。
   - 光敏電阻併排排列。
   - 將 LED 模組安裝在光敏電阻上方，並連接 VCC、GND、ADC 和控制腳位。

2. **資料準備**：
   - 收集 RGB 感測數據，分為訓練資料與測試資料。
   - 每種顏色輸出約 15 至 30 筆資料，並加入實驗室環境光作為訓練資料。

3. **資料前處理**：
   - 計算訓練資料的平均值與標準差，對資料進行標準化處理。
   - 使用 `normalize()` 函數將輸入資料縮放至均值為 0，標準差為 1。

4. **模型訓練**：
   - 隨機初始化 ANN 的隱藏層與輸出層權重。
   - 使用均方誤差（MSE）作為損失函數，採用 Adam 優化器進行梯度更新。

5. **測試與驗證**：
   - 將測試資料輸入已訓練模型，計算準確率。

## 系統架構
### 程式結構
- **main.c**：
  - `SYS_Init()`：初始化系統時鐘與多功能腳位。
  - `UART0_Init()`：初始化 UART 用於訊息輸出。
  - `data_setup()`：隨機化訓練資料索引並進行標準化處理。
  - `run_train_data()`：對訓練資料進行推理並計算準確率。
  - `run_test_data()`：對測試資料進行推理並計算準確率。

### 人工神經網路 (ANN) 結構
- **輸入層 (Input Layer)**：
  - 接收 3 個特徵值（R、G、B）。
- **隱藏層 (Hidden Layer)**：
  - 包含 12 個神經元，採用 Sigmoid 激活函數。
- **輸出層 (Output Layer)**：
  - 包含 7 個輸出節點，使用 Softmax 激活函數，對應 7 種顏色分類。

### 損失函數與優化
- **損失函數**：
  - 使用均方誤差（MSE）計算模型預測與實際標籤之間的差異。
- **優化器**：
  - 使用 Adam 優化器自適應調整學習率以加速收斂。

## 成果展示
- 成功辨識訓練資料與測試資料中的顏色分類，達成高準確率。